{"ast":null,"code":"var _jsxFileName = \"/Users/dahan/Desktop/blockchain/BTA1stProject-18/near-pocket/src/views/Popup/Dashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { fetchBalance, getStorageSyncValue, initialTasks, showAllHoldings } from \"../../utils/utilsUpdated\";\nimport { SHOW_ALL_CUSTOM_TOKENS, SWITCH_ACCOUNT } from \"../../redux/actionTypes\";\nimport { CONFIG } from \"../../constants\";\nimport { connect } from \"near-api-js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nlet near;\nconst Dashboard = () => {\n  _s();\n  const [privateKey, setPrivateKey] = useState(\"\");\n  const [address, setAddress] = useState(\"\");\n  const [seedPhrase, setSeedPhrase] = useState(\"\");\n  const [balance, setBalance] = useState(0);\n  const [allWallets, setAllWallets] = useState([]);\n  const allTokens = useSelector(_ref => {\n    let {\n      walletEncrypted\n    } = _ref;\n    return walletEncrypted === null || walletEncrypted === void 0 ? void 0 : walletEncrypted.allTokens;\n  });\n  const activeWallet = useSelector(_ref2 => {\n    let {\n      walletEncrypted\n    } = _ref2;\n    return walletEncrypted === null || walletEncrypted === void 0 ? void 0 : walletEncrypted.activeWallet;\n  });\n  const activeAccountID = useSelector(_ref3 => {\n    let {\n      walletEncrypted\n    } = _ref3;\n    return walletEncrypted === null || walletEncrypted === void 0 ? void 0 : walletEncrypted.activeAccountID;\n  });\n  console.log(activeWallet);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    (async () => {\n      near = await connect(CONFIG);\n    })();\n  }, []);\n  useEffect(() => {\n    (async () => {\n      const {\n        address,\n        mnemonic,\n        secret,\n        accountID,\n        allAccounts\n      } = await initialTasks(activeWallet);\n      console.log(\"accc\", accountID);\n      let userInfo = await getStorageSyncValue(\"userInfo\");\n      const account = await near.account(accountID);\n      console.log(account);\n      const availableBalance = await fetchBalance(account);\n      //const allTokens = await showAllHoldings(accountID, near);\n      let wallets = [];\n      allAccounts.map(acc => {\n        wallets.push(userInfo[acc]);\n      });\n      setAllWallets(wallets);\n      dispatch({\n        type: SHOW_ALL_CUSTOM_TOKENS,\n        payload: allTokens\n      });\n      setAddress(address);\n      setPrivateKey(secret);\n      setSeedPhrase(mnemonic);\n      setBalance(availableBalance);\n    })();\n  }, [activeWallet]);\n  const changeAccount = async e => {\n    let [walletName, accId] = e.target.value.split(\":\");\n    console.log(\"ACCC============================\", accId);\n    dispatch({\n      type: SWITCH_ACCOUNT,\n      payload: {\n        activeWallet: walletName,\n        activeAccountID: accId\n      }\n    });\n  };\n  console.log(\"active: \", activeAccountID);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        overflowWrap: \"break-word\"\n      },\n      children: [\"PRIVATE KEY: \", privateKey]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        overflowWrap: \"break-word\"\n      },\n      children: [\"Address: \", address]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"SEED PHRASE: \", seedPhrase]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      onChange: e => changeAccount(e),\n      children: allWallets.map((add, i) => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: `${add.name}:${add.accountID}`,\n        selected: add.accountID === activeAccountID,\n        children: add.accountID\n      }, add.accountID, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n      children: [\"NEAR Balance: \", balance, \" NEAR\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/send\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/seed-phrase\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        children: \"Create Account\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/import-account\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        children: \"Import Account\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Your Holdings\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: allTokens === null || allTokens === void 0 ? void 0 : allTokens.map(tk => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [tk.name, \" - \", tk.balance, \" \", tk.symbol]\n      }, tk.address, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(Dashboard, \"slroemjWt83akTIinaGkavQ6I0Q=\", false, function () {\n  return [useSelector, useSelector, useSelector, useDispatch];\n});\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useCallback","useEffect","useState","useDispatch","useSelector","Link","fetchBalance","getStorageSyncValue","initialTasks","showAllHoldings","SHOW_ALL_CUSTOM_TOKENS","SWITCH_ACCOUNT","CONFIG","connect","near","Dashboard","privateKey","setPrivateKey","address","setAddress","seedPhrase","setSeedPhrase","balance","setBalance","allWallets","setAllWallets","allTokens","walletEncrypted","activeWallet","activeAccountID","console","log","dispatch","mnemonic","secret","accountID","allAccounts","userInfo","account","availableBalance","wallets","map","acc","push","type","payload","changeAccount","e","walletName","accId","target","value","split","overflowWrap","add","i","name","tk","symbol"],"sources":["/Users/dahan/Desktop/blockchain/BTA1stProject-18/near-pocket/src/views/Popup/Dashboard.js"],"sourcesContent":["import React, { useCallback, useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\n\nimport {\n  fetchBalance,\n  getStorageSyncValue,\n  initialTasks,\n  showAllHoldings,\n} from \"../../utils/utilsUpdated\";\nimport {\n  SHOW_ALL_CUSTOM_TOKENS,\n  SWITCH_ACCOUNT,\n} from \"../../redux/actionTypes\";\nimport { CONFIG } from \"../../constants\";\nimport { connect } from \"near-api-js\";\n\nlet near;\n\nconst Dashboard = () => {\n  const [privateKey, setPrivateKey] = useState(\"\");\n  const [address, setAddress] = useState(\"\");\n  const [seedPhrase, setSeedPhrase] = useState(\"\");\n\n  const [balance, setBalance] = useState(0);\n  const [allWallets, setAllWallets] = useState([]);\n\n  const allTokens = useSelector(\n    ({ walletEncrypted }) => walletEncrypted?.allTokens\n  );\n  const activeWallet = useSelector(\n    ({ walletEncrypted }) => walletEncrypted?.activeWallet\n  );\n\n  const activeAccountID = useSelector(\n    ({ walletEncrypted }) => walletEncrypted?.activeAccountID\n  );\n\n  console.log(activeWallet);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    (async () => {\n      near = await connect(CONFIG);\n    })();\n  }, []);\n\n  useEffect(() => {\n    (async () => {\n      const { address, mnemonic, secret, accountID, allAccounts } =\n        await initialTasks(activeWallet);\n      console.log(\"accc\", accountID);\n\n      let userInfo = await getStorageSyncValue(\"userInfo\");\n      const account = await near.account(accountID);\n      console.log(account)\n      const availableBalance = await fetchBalance(account);\n      //const allTokens = await showAllHoldings(accountID, near);\n      let wallets = [];\n      allAccounts.map(acc => {\n        wallets.push(userInfo[acc]);\n      });\n      setAllWallets(wallets);\n      dispatch({\n        type: SHOW_ALL_CUSTOM_TOKENS,\n        payload: allTokens,\n      });\n\n      setAddress(address);\n      setPrivateKey(secret);\n      setSeedPhrase(mnemonic);\n      setBalance(availableBalance);\n    })();\n  }, [activeWallet]);\n\n  const changeAccount = async e => {\n    let [walletName, accId] = e.target.value.split(\":\");\n    console.log(\"ACCC============================\", accId);\n    dispatch({\n      type: SWITCH_ACCOUNT,\n      payload: {\n        activeWallet: walletName,\n        activeAccountID: accId,\n      },\n    });\n  };\n\n  console.log(\"active: \", activeAccountID);\n  return (\n    <>\n      <h3 style={{ overflowWrap: \"break-word\" }}>PRIVATE KEY: {privateKey}</h3>\n      <h3 style={{ overflowWrap: \"break-word\" }}>Address: {address}</h3>\n      <h3>SEED PHRASE: {seedPhrase}</h3>\n\n      <select onChange={e => changeAccount(e)}>\n        {allWallets.map((add, i) => (\n          <option\n            key={add.accountID}\n            value={`${add.name}:${add.accountID}`}\n            selected={add.accountID === activeAccountID}\n          >\n            {add.accountID}\n          </option>\n        ))}\n      </select>\n\n      <h4>NEAR Balance: {balance} NEAR</h4>\n      <Link to=\"/send\">\n        <button>Send</button>\n      </Link>\n\n      <Link to=\"/seed-phrase\">\n        <button>Create Account</button>\n      </Link>\n\n      <Link to=\"/import-account\">\n        <button>Import Account</button>\n      </Link>\n\n      <h2>Your Holdings</h2>\n      <ul>\n        {allTokens?.map(tk => (\n          <li key={tk.address}>\n            {tk.name} - {tk.balance} {tk.symbol}\n          </li>\n        ))}\n      </ul>\n    </>\n  );\n};\n\nexport default Dashboard;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}